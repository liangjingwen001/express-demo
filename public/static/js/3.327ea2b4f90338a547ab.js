webpackJsonp([3],{"tk5+":function(t,e){},v2W6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"HelloWorld",data:function(){return{img:"",imgUrl:"",title:"",author:"",newsContent:"",id:""}},methods:{tosonfoot:function(){this.$router.push({name:"foot"})},uploadImg:function(t){var e=this,n=t.target.files[0];if(n){var a=new FileReader;a.readAsDataURL(n),a.onload=function(t){var n=a.result.split(",")[1];e.imgUrl=t.target.result,e.$ajax.uploadImg({params:{img:n},success:function(t){console.log(t)}})}}},getImg:function(t){var e=this;this.$ajax.getImg({params:{token:this.$store.state.token},success:function(t){e.imgUrl="data:image/png;base64,"+t.data.data}})},addNews:function(){var t=this;this.$ajax.addNews({params:{title:this.title,author:this.author,newsContent:this.newsContent,token:this.$store.state.token},success:function(e){t.$router.push({name:"index"})}})},init:function(t){var e=this;this.$ajax.newsDetail({params:{_id:t,token:this.$store.state.token},success:function(t){var n=t.data.data[0];e.title=n.title,e.author=n.author,e.newsContent=n.newsContent}})},editNews:function(){var t=this;this.$ajax.editNews({params:{_id:this.id,title:this.title,author:this.author,newsContent:this.newsContent,token:this.$store.state.token},success:function(e){(e.data.code=200)&&t.$router.push({name:"index"})}})}},mounted:function(){this.getImg(),this.$route.query.id&&(this.id=this.$route.query.id,this.init(this.$route.query.id))}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("input",{attrs:{type:"file"},on:{change:t.uploadImg}}),t._v(" "),n("router-link",{attrs:{to:"/result"}},[t._v(" Go to result")]),t._v(" "),n("img",{attrs:{src:t.imgUrl,alt:""}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",placeholder:"作者"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}}),n("br"),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newsContent,expression:"newsContent"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"内容"},domProps:{value:t.newsContent},on:{input:function(e){e.target.composing||(t.newsContent=e.target.value)}}}),n("br"),t._v(" "),n("button",{on:{click:t.addNews}},[t._v("上传")]),t._v(" "),n("button",{on:{click:t.editNews}},[t._v("编辑")])],1)},staticRenderFns:[]};var s=n("VU/8")(a,o,!1,function(t){n("tk5+")},"data-v-260fa7f0",null);e.default=s.exports}});
//# sourceMappingURL=3.327ea2b4f90338a547ab.js.map